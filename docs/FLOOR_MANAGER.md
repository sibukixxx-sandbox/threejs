# ğŸ¢ Floor Manager - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å“ç®¡ç†3Dãƒãƒƒãƒ—

ãƒŠã‚¤ãƒˆã‚¯ãƒ©ãƒ–ãƒ»ã‚­ãƒ£ãƒã‚¯ãƒ©ãƒ»ãƒ©ã‚¦ãƒ³ã‚¸ãªã©ã®æ¥å®¢æ¥­ã§ã€**é»’æœï¼ˆé‹å–¶ã‚¹ã‚¿ãƒƒãƒ•ï¼‰ãŒã€Œç¥ã®è¦–ç‚¹ã€ã§ãƒ•ãƒ­ã‚¢å…¨ä½“ã‚’æŠŠæ¡ã—ã€ç¬æ™‚ã«æŒ‡ç¤ºã‚’å‡ºã›ã‚‹**ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ 3Dç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€‚

## ğŸ“– æ¦‚è¦

å¾“æ¥ã®2Då¹³é¢å›³ã§ã¯æŠŠæ¡ã—ã¥ã‚‰ã‹ã£ãŸã€ŒVIPå¸­ã‹ã‚‰ã®è¦–ç·šã€ã€Œãƒ›ãƒ¼ãƒ«å…¨ä½“ã®æ··é›‘æ„Ÿã€ã€Œå„ãƒ†ãƒ¼ãƒ–ãƒ«ã®çŠ¶æ³ã€ã‚’ã€3Dç©ºé–“ã§ç›´æ„Ÿçš„ã«å¯è¦–åŒ–ã—ã¾ã™ã€‚

### ä¸»ãªç‰¹å¾´

- **3Dãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ—**: VIPå¸­ï¼ˆé«˜å°ï¼‰ã€ä¸€èˆ¬å¸­ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’ç«‹ä½“çš„ã«é…ç½®
- **ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ï¼ˆçŠ¶æ…‹å¯è¦–åŒ–ï¼‰**:
  - ğŸ”´ **Red (HOT)**: é«˜é¡ã‚ªãƒ¼ãƒ€ãƒ¼ç™ºç”Ÿä¸­ / ç››ã‚Šä¸ŠãŒã‚Š
  - ğŸŸ¡ **Gold (VIP)**: VIPå®¢æ»åœ¨ä¸­
  - ğŸŸ¢ **Green (ACTIVE)**: é€šå¸¸ç¨¼åƒä¸­
  - âš« **Grey (EMPTY)**: ç©ºå¸­ / æ¡ˆå†…å¯èƒ½
  - ğŸŸ  **Orange (CHECK)**: ä¼šè¨ˆè¦è«‹
  - ğŸ”´ **Red Blinking (SOS)**: ãƒˆãƒ©ãƒ–ãƒ« / ç·Šæ€¥å¯¾å¿œ
- **æƒ…å ±ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: å„å¸­ã®ä¸Šã«ã€Œæ»åœ¨æ™‚é–“ã€ã¨ã€Œå£²ä¸Šé¡ã€ã‚’å¸¸æ™‚è¡¨ç¤º
- **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–**: ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°æƒ…å ±è¡¨ç¤ºã€æŒ‡ç¤ºé€ä¿¡
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: è‡ªå‹•ã§ãƒ†ãƒ¼ãƒ–ãƒ«çŠ¶æ…‹ãŒæ›´æ–°ã•ã‚Œã‚‹

## ğŸ¯ ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

### 1. ãƒŠã‚¤ãƒˆã‚¯ãƒ©ãƒ– / ãƒ©ã‚¦ãƒ³ã‚¸é‹å–¶

**ç”¨é€”**: é»’æœï¼ˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼‰ã«ã‚ˆã‚‹ãƒ•ãƒ­ã‚¢ç›£è¦–
- iPadã§3Dãƒãƒƒãƒ—ã‚’ç¢ºèªã—ãªãŒã‚‰å·¡å›
- HOTï¼ˆèµ¤ï¼‰ãƒ†ãƒ¼ãƒ–ãƒ« = ã‚·ãƒ£ãƒ³ãƒ‘ãƒ³ã‚ªãƒ¼ãƒ€ãƒ¼ç™ºç”Ÿ â†’ ã™ãã«ã‚¢ã‚¤ã‚¹ãƒ»ã‚°ãƒ©ã‚¹è£œå……
- CHECKï¼ˆæ©™ï¼‰ãƒ†ãƒ¼ãƒ–ãƒ« = ä¼šè¨ˆè¦è«‹ â†’ ã‚­ãƒ£ãƒƒã‚·ãƒ£ãƒ¼ã«é€šçŸ¥
- SOSï¼ˆèµ¤ç‚¹æ»…ï¼‰= ãƒˆãƒ©ãƒ–ãƒ«ç™ºç”Ÿ â†’ å³åº§ã«å¯¾å¿œ

### 2. ã‚­ãƒ£ãƒã‚¯ãƒ© / ã‚¯ãƒ©ãƒ–æŒ‡åç®¡ç†

**ç”¨é€”**: ãƒ›ãƒ¼ãƒ«ã‚¹ã‚¿ãƒƒãƒ•ã«ã‚ˆã‚‹å¥³ã®å­ã®ã‚¢ã‚µã‚¤ãƒ³ç®¡ç†
- VIPãƒ†ãƒ¼ãƒ–ãƒ«ã®æ»åœ¨æ™‚é–“ç›£è¦– â†’ å»¶é•·äº¤æ¸‰ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°æŠŠæ¡
- å£²ä¸Šãƒ©ãƒ³ã‚¯è¡¨ç¤º â†’ ãƒœãƒˆãƒ«ãŒå‡ºãŸå“ã‚’å„ªå…ˆã‚±ã‚¢
- ç©ºå¸­å¯è¦–åŒ– â†’ æ–°è¦å®¢ã®æ¡ˆå†…å…ˆã‚’ç¬æ™‚ã«åˆ¤æ–­

### 3. ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ / ã‚«ãƒ•ã‚§ã®ãƒ†ãƒ¼ãƒ–ãƒ«ç®¡ç†

**ç”¨é€”**: ãƒ›ãƒ¼ãƒ«ã‚¹ã‚¿ãƒƒãƒ•ã®åŠ¹ç‡åŒ–
- æº€å¸­çŠ¶æ³ã®ä¸€ç›®ç¢ºèª
- æ»åœ¨æ™‚é–“ã®é•·ã„ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æŠŠæ¡ â†’ å›è»¢ç‡å‘ä¸Š
- ã‚ªãƒ¼ãƒ€ãƒ¼é »åº¦ãŒé«˜ã„ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å„ªå…ˆå¯¾å¿œ

### 4. ã‚¤ãƒ™ãƒ³ãƒˆä¼šå ´ / ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼é‹å–¶

**ç”¨é€”**: ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¿ãƒƒãƒ•ã®é…ç½®æœ€é©åŒ–
- VIPã‚¨ãƒªã‚¢ã®ç›£è¦–
- ãƒ‰ãƒªãƒ³ã‚¯è£œå……ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®æœ€é©åŒ–
- ãƒˆãƒ©ãƒ–ãƒ«ç™ºç”Ÿæ™‚ã®è¿…é€Ÿãªå¯¾å¿œ

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
src/
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ FloorManager.ts       # ãƒ•ãƒ­ã‚¢ç®¡ç†ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â””â”€â”€ floorGUI.ts           # lil-guiçµ±åˆ
â”œâ”€â”€ store/
â”‚   â””â”€â”€ floorStore.ts         # Zustand stateç®¡ç†
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ FloorManagerComponent.tsx      # React Three Fiberã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ FloorManagerScene.tsx          # ãƒ¡ã‚¤ãƒ³ã‚·ãƒ¼ãƒ³
â”‚   â””â”€â”€ FloorManagerControlPanel.tsx   # Levaã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
POS/ãƒ¬ã‚¸ API (å¤–éƒ¨)
    â†“
Zustand Store (floorStore)
    â†“
React Component (FloorManagerComponent)
    â†“
FloorManager + Table3D Classes
    â†“
THREE.js Scene (MeshStandardMaterial + CanvasTexture)
```

## ğŸš€ ä½¿ã„æ–¹

### React Three Fiberç‰ˆï¼ˆæ¨å¥¨ï¼‰

```tsx
import { FloorManagerScene } from './components/FloorManagerScene'
import { FloorManagerControlPanel } from './components/FloorManagerControlPanel'

function App() {
  return (
    <>
      <FloorManagerScene />
      <FloorManagerControlPanel />
    </>
  )
}
```

### Vanilla Three.js + lil-guiç‰ˆ

```typescript
import * as THREE from 'three'
import { FloorManager } from './utils/FloorManager'
import { setupFloorGUI } from './utils/floorGUI'
import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'

// ã‚·ãƒ¼ãƒ³æº–å‚™
const scene = new THREE.Scene()
scene.background = new THREE.Color(0x050505)
scene.fog = new THREE.FogExp2(0x050505, 0.03)

const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 100)
camera.position.set(0, 15, 15)

const renderer = new THREE.WebGLRenderer({ antialias: true })
renderer.setSize(window.innerWidth, window.innerHeight)
renderer.shadowMap.enabled = true
document.body.appendChild(renderer.domElement)

// ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°
const ambientLight = new THREE.AmbientLight(0x404040)
scene.add(ambientLight)

const spotLight = new THREE.SpotLight(0xffffff, 100)
spotLight.position.set(0, 20, 0)
spotLight.angle = Math.PI / 4
spotLight.castShadow = true
scene.add(spotLight)

// ãƒ•ãƒ­ã‚¢ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ç”Ÿæˆ
const manager = new FloorManager(scene, {
  floorSize: { w: 30, h: 20 },
  tableRadius: 0.8,
  sofaColor: 0x222222,
})

// ãƒ†ãƒ¼ãƒ–ãƒ«é…ç½®ï¼ˆVIPã‚¨ãƒªã‚¢ï¼‰
manager.addTable('V-1', -8, -5, 'VIP')
manager.addTable('V-2', 0, -5, 'VIP')
manager.addTable('V-3', 8, -5, 'VIP')

// ãƒ†ãƒ¼ãƒ–ãƒ«é…ç½®ï¼ˆä¸€èˆ¬ã‚¨ãƒªã‚¢ï¼‰
for (let i = 0; i < 5; i++) {
  manager.addTable(`A-${i + 1}`, (i - 2) * 5, 2, 'NORMAL')
}

// GUIè¨­å®š
const { params, gui, updateStats } = setupFloorGUI(manager)

// ã‚«ãƒ¡ãƒ©ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
const controls = new OrbitControls(camera, renderer.domElement)
controls.enableDamping = true

// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ—
function animate() {
  requestAnimationFrame(animate)
  controls.update()
  manager.animate(Date.now() * 0.001)
  updateStats()
  renderer.render(scene, camera)
}
animate()
```

## âš™ï¸ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è§£èª¬

### Table Statusï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«çŠ¶æ…‹ï¼‰

| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | è‰² | æ„å‘³ | ç”¨é€” |
|----------|-----|------|------|
| `EMPTY` | Grey | ç©ºå¸­ | æ–°è¦å®¢ã®æ¡ˆå†…å¯èƒ½ |
| `ACTIVE` | Green | é€šå¸¸ç¨¼åƒä¸­ | ã‚ªãƒ¼ãƒ€ãƒ¼ãƒ»æ¥å®¢ä¸­ |
| `HOT` | Red | é«˜é¡ã‚ªãƒ¼ãƒ€ãƒ¼ä¸­ | ã‚·ãƒ£ãƒ³ãƒ‘ãƒ³/ãƒœãƒˆãƒ«å‡ºç¾ã€å„ªå…ˆã‚±ã‚¢ |
| `VIP` | Gold | VIPå®¢ | ç‰¹åˆ¥å¯¾å¿œã€å»¶é•·äº¤æ¸‰ |
| `CHECK` | Orange | ä¼šè¨ˆè¦è«‹ | ãƒ¬ã‚¸æ‹…å½“ã«é€šçŸ¥ |
| `SOS` | Red (ç‚¹æ»…) | ç·Šæ€¥å¯¾å¿œ | ãƒˆãƒ©ãƒ–ãƒ«ç™ºç”Ÿã€å³åº§ã«å¯¾å¿œ |

### Table Dataï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼‰

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‹ | èª¬æ˜ |
|----------|-----|------|
| `id` | string | ãƒ†ãƒ¼ãƒ–ãƒ«IDï¼ˆä¾‹: `V-1`, `A-5`ï¼‰ |
| `type` | `VIP` \| `NORMAL` \| `COUNTER` | ãƒ†ãƒ¼ãƒ–ãƒ«ç¨®åˆ¥ |
| `status` | TableStatus | ç¾åœ¨ã®çŠ¶æ…‹ |
| `guests` | number | æ¥å®¢äººæ•° |
| `timeMin` | number | æ»åœ¨æ™‚é–“ï¼ˆåˆ†ï¼‰ |
| `sales` | number | ç´¯è¨ˆå£²ä¸Šï¼ˆå††ï¼‰ |
| `bottle` | string | ãƒœãƒˆãƒ«åï¼ˆä¾‹: `Dom Perignon`ï¼‰ |
| `position` | `{ x, z }` | ãƒ•ãƒ­ã‚¢ä¸Šã®åº§æ¨™ |

### Floor Configï¼ˆãƒ•ãƒ­ã‚¢è¨­å®šï¼‰

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | ç¯„å›² | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|----------|------|----------|------|
| `floorSize.w` | 20ã€œ50 | 30 | ãƒ•ãƒ­ã‚¢ã®å¹… |
| `floorSize.h` | 15ã€œ40 | 20 | ãƒ•ãƒ­ã‚¢ã®å¥¥è¡Œã |
| `tableRadius` | 0.5ã€œ1.5 | 0.8 | ãƒ†ãƒ¼ãƒ–ãƒ«ã®åŠå¾„ |

## ğŸ¨ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ—ãƒªã‚»ãƒƒãƒˆ

### Small (10å¸­)
```typescript
- VIPã‚¨ãƒªã‚¢: 2å¸­
- ä¸€èˆ¬ã‚¨ãƒªã‚¢: 8å¸­
- ç·åº§å¸­æ•°: 10å¸­
- ç”¨é€”: å°è¦æ¨¡ãƒãƒ¼ã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ©ã‚¦ãƒ³ã‚¸
```

### Medium (20å¸­)
```typescript
- VIPã‚¨ãƒªã‚¢: 3å¸­
- ä¸€èˆ¬ã‚¨ãƒªã‚¢: 17å¸­
- ç·åº§å¸­æ•°: 20å¸­
- ç”¨é€”: ä¸­è¦æ¨¡ã‚¯ãƒ©ãƒ–ã€ã‚­ãƒ£ãƒã‚¯ãƒ©
```

### Large (30+å¸­)
```typescript
- VIPã‚¨ãƒªã‚¢: 5å¸­
- ä¸€èˆ¬ã‚¨ãƒªã‚¢: 25å¸­
- ç·åº§å¸­æ•°: 30å¸­
- ç”¨é€”: å¤§è¦æ¨¡ãƒŠã‚¤ãƒˆã‚¯ãƒ©ãƒ–ã€ã‚¤ãƒ™ãƒ³ãƒˆä¼šå ´
```

## ğŸ”§ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºä¾‹

### POSé€£æºï¼ˆå£²ä¸Šãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åæ˜ ï¼‰

```typescript
// POSãƒ¬ã‚¸APIã‹ã‚‰å£²ä¸Šæƒ…å ±ã‚’å–å¾—
async function syncWithPOS() {
  const response = await fetch('/api/tables/sales')
  const salesData = await response.json()

  salesData.forEach((data) => {
    manager.updateTable(data.tableId, {
      sales: data.totalSales,
      bottle: data.bottle,
      timeMin: data.elapsedMinutes,
    })

    // é«˜é¡ã«ãªã£ãŸã‚‰HOTã«å¤‰æ›´
    if (data.totalSales > 50000) {
      manager.updateTable(data.tableId, { status: 'HOT' })
    }
  })
}

setInterval(syncWithPOS, 5000) // 5ç§’ã”ã¨ã«åŒæœŸ
```

### WebSocketçµŒç”±ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°

```typescript
const ws = new WebSocket('wss://your-server.com/floor-updates')

ws.onmessage = (event) => {
  const update = JSON.parse(event.data)

  switch (update.type) {
    case 'table_status':
      manager.updateTable(update.tableId, { status: update.status })
      break
    case 'new_order':
      manager.updateTable(update.tableId, {
        sales: update.newSales,
        bottle: update.bottle,
      })
      break
    case 'check_request':
      manager.updateTable(update.tableId, { status: 'CHECK' })
      break
    case 'sos':
      manager.updateTable(update.tableId, { status: 'SOS' })
      break
  }
}
```

### iPadã‚¢ãƒ—ãƒªåŒ–ï¼ˆPWAï¼‰

```json
// manifest.json
{
  "name": "Floor Manager",
  "short_name": "FloorMgr",
  "description": "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å“ç®¡ç†3Dãƒãƒƒãƒ—",
  "start_url": "/",
  "display": "standalone",
  "orientation": "landscape",
  "background_color": "#000000",
  "theme_color": "#ff00ff",
  "icons": [
    {
      "src": "/icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/icon-512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
```

### æŒ‡ç¤ºé€ä¿¡æ©Ÿèƒ½

```typescript
// ãƒ†ãƒ¼ãƒ–ãƒ«é¸æŠæ™‚ã«æŒ‡ç¤ºãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
function onTableClick(tableId: string) {
  const table = manager.getTable(tableId)
  if (!table) return

  // UIã«è©³ç´°ãƒ‘ãƒãƒ«ã‚’è¡¨ç¤º
  showDetailPanel({
    tableId: table.id,
    guests: table.data.guests,
    sales: table.data.sales,
    actions: [
      {
        label: 'CHECKï¼ˆä¼šè¨ˆï¼‰',
        onClick: () => {
          // ã‚¹ã‚¿ãƒƒãƒ•ã«é€šçŸ¥
          sendNotification('CHECK_REQUEST', tableId)
          manager.updateTable(tableId, { status: 'CHECK' })
        },
      },
      {
        label: 'ã‚¢ã‚¤ã‚¹äº¤æ›',
        onClick: () => {
          sendNotification('ICE_REPLACEMENT', tableId)
        },
      },
      {
        label: 'SOSç™ºä¿¡',
        onClick: () => {
          sendNotification('SOS', tableId)
          manager.updateTable(tableId, { status: 'SOS' })
        },
      },
    ],
  })
}
```

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°è² è·

| ãƒ†ãƒ¼ãƒ–ãƒ«æ•° | ä¸‰è§’å½¢æ•° | FPS (60Hz) | æ¨å¥¨ãƒ‡ãƒã‚¤ã‚¹ |
|----------|---------|-----------|------------|
| 10       | 1,500   | âœ… 60     | iPhone, iPad |
| 20       | 3,000   | âœ… 60     | iPad, PC |
| 30       | 4,500   | âœ… 58     | iPad Pro, PC |
| 50       | 7,500   | âš ï¸ 50     | PC |

**æœ€é©åŒ–ã®ãƒ’ãƒ³ãƒˆ**:
- ãƒ†ãƒ¼ãƒ–ãƒ«æ•°ãŒ50ã‚’è¶…ãˆã‚‹å ´åˆã¯`InstancedMesh`ã¸ã®ç§»è¡Œã‚’æ¤œè¨
- `shadowMap`ã‚’ã‚ªãƒ•ã«ã™ã‚‹ã¨è² è·è»½æ¸›
- ãƒ¢ãƒã‚¤ãƒ«ã§ã¯`antialias: false`ã‚’æ¤œè¨

## ğŸ§© æ‹¡å¼µã‚¢ã‚¤ãƒ‡ã‚¢

### 1. ã‚«ãƒ¡ãƒ©AIé€£æºï¼ˆä¸Šç´šç·¨ï¼‰

å¤©äº•ã‚«ãƒ¡ãƒ©ã®æ˜ åƒã‚’AIè§£æã—ã€ä»¥ä¸‹ã‚’è‡ªå‹•æ¤œçŸ¥:
- ã‚°ãƒ©ã‚¹ãŒç©ºã„ã¦ã„ã‚‹ â†’ è‡ªå‹•ã§ã€Œãƒ‰ãƒªãƒ³ã‚¯è£œå……ã€ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤º
- ãŠå®¢æ§˜ãŒã‚¿ãƒã‚³ã‚’å–ã‚Šå‡ºã—ãŸ â†’ ãƒ©ã‚¤ã‚¿ãƒ¼ãƒ»ç°çš¿ã‚’æŒã£ã¦è¨ªå•
- æ‰‹ã‚’æŒ™ã’ã¦ã„ã‚‹ â†’ å‘¼ã³å‡ºã—æ¤œçŸ¥

```typescript
// AIè§£æçµæœã‚’å—ä¿¡
ws.onmessage = (event) => {
  const aiResult = JSON.parse(event.data)

  if (aiResult.event === 'empty_glass') {
    manager.updateTable(aiResult.tableId, { status: 'CHECK' })
  }

  if (aiResult.event === 'hand_raised') {
    manager.updateTable(aiResult.tableId, { status: 'SOS' })
  }
}
```

### 2. ã‚¹ã‚¿ãƒƒãƒ•ä½ç½®ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°

BLEï¼ˆBluetooth Low Energyï¼‰ã§ã‚¹ã‚¿ãƒƒãƒ•ã®ä½ç½®ã‚’è¿½è·¡ã—ã€3Dãƒãƒƒãƒ—ä¸Šã«è¡¨ç¤º:

```typescript
// ã‚¹ã‚¿ãƒƒãƒ•ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¿½åŠ 
const staffIcon = new THREE.Sprite(staffMaterial)
staffIcon.position.set(x, 0.5, z)
scene.add(staffIcon)

// ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
ws.onmessage = (event) => {
  const staffPos = JSON.parse(event.data)
  staffIcon.position.set(staffPos.x, 0.5, staffPos.z)
}
```

### 3. å£²ä¸Šäºˆæ¸¬AI

éå»ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€Œã“ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¯å»¶é•·ã—ãã†ã€ã€Œãƒœãƒˆãƒ«ãŒå‡ºã‚‹ç¢ºç‡80%ã€ã‚’äºˆæ¸¬ã—ã€äº‹å‰ã«ã‚±ã‚¢:

```typescript
async function predictExtension(tableId: string) {
  const response = await fetch(`/api/predict/${tableId}`)
  const prediction = await response.json()

  if (prediction.extensionProbability > 0.7) {
    // å»¶é•·äº¤æ¸‰ã®æº–å‚™ã‚’é€šçŸ¥
    sendNotification('EXTENSION_LIKELY', tableId)
  }
}
```

### 4. éŸ³å£°ã‚³ãƒãƒ³ãƒ‰å¯¾å¿œ

ã€Œãƒ†ãƒ¼ãƒ–ãƒ«A-1ã«ãƒã‚§ãƒƒã‚¯é€ä¿¡ã€ãªã©ã®éŸ³å£°æŒ‡ç¤ºã§æ“ä½œ:

```typescript
const recognition = new (window as any).webkitSpeechRecognition()
recognition.lang = 'ja-JP'

recognition.onresult = (event: any) => {
  const command = event.results[0][0].transcript

  if (command.includes('ãƒã‚§ãƒƒã‚¯')) {
    const tableId = extractTableId(command)
    manager.updateTable(tableId, { status: 'CHECK' })
  }
}

recognition.start()
```

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ†ãƒ¼ãƒ–ãƒ«ãŒè¡¨ç¤ºã•ã‚Œãªã„

**åŸå› **: ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ—ãƒªã‚»ãƒƒãƒˆãŒé©ç”¨ã•ã‚Œã¦ã„ãªã„

**è§£æ±ºç­–**: `Layout`ãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰`Medium (20 tables)`ã‚’ã‚¯ãƒªãƒƒã‚¯

### ç™ºå…‰ãŒè¦‹ãˆãªã„

**åŸå› **: ãƒ©ã‚¤ãƒˆã®å¼·åº¦ãŒä½ã„ã€ã¾ãŸã¯`emissiveIntensity`ãŒ0

**è§£æ±ºç­–**: `Lighting`ãƒ•ã‚©ãƒ«ãƒ€ã§`Spotlight Intensity`ã‚’100ä»¥ä¸Šã«è¨­å®š

### ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‹•ã‹ãªã„

**åŸå› **: `Auto Simulation`ãŒOFF

**è§£æ±ºç­–**: `Simulation`ãƒ•ã‚©ãƒ«ãƒ€ã§`Auto Simulation`ã‚’ONã«

### ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚ãƒ†ãƒ¼ãƒ–ãƒ«ãŒé¸æŠã•ã‚Œãªã„

**åŸå› **: RaycasterãŒã†ã¾ãæ©Ÿèƒ½ã—ã¦ã„ãªã„

**è§£æ±ºç­–**: ã‚«ãƒ¡ãƒ©ã‚¢ãƒ³ã‚°ãƒ«ã‚’å¤‰ãˆã¦ã¿ã‚‹ã€‚æ­£é¢ã‹ã‚‰è¦‹ã‚‹è§’åº¦ã§è©¦ã™ã€‚

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [Three.js Documentation](https://threejs.org/docs/)
- [React Three Fiber](https://docs.pmnd.rs/react-three-fiber/)
- [lil-gui Documentation](https://lil-gui.georgealways.com/)
- [Zustand](https://zustand-demo.pmnd.rs/)
- [WebSocket API](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚
